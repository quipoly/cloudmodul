#cloud-config
users:
  - default
  - name: yannic
    sudo: ALL=(ALL) NOPASSWD:ALL
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC1HBhlkmu2w4FWbqGjc3V/1l3IBOz+/SblcdhMIKun1ljpQjZ37JJ2F9C17Ajb/SP6Un1OZnpZy13L6iUHASU3RkrK0Ts58SNtYXZN/4f1zcvWcAv7ypHdatulIG1lcUjjJTnnYJlOyol2BnlsK42Kw6/MWDJZIKNjVSRWl0bkkI14n7asuhYEDzj9bSpw6dlMtnIF7KXVuIEuiy6Cg5lpmqSTTWXrTAmQ0iFf+L7DD/7GQ3Texl/WvvlnbV0p8QFJu9YLtJzfBeziv0mD9yRCo5kqtrfEaMjAvgvQVCZQAsB2JygPkHCadynGAxmpNCWF6EwXZfcX0dxUuYkYmPb5b1+0gG7ywz5V4gdxOLn1j/PXvoCXsYPqg9f3mpKD7slBaA8lfs4I3wmC4pHW8Kv896lm7EW98Lh67ieO87/19H458UDeZvI6dYQlZLvPsVRsdxIqnm97oHdaT96/rgZmfG2bjKrmvSz9gLq0rSs2/0YNWIiFY/EtA/lmRrhSO7U= yannic@Desktop-Yannic


packages:
  - curl
  - sudo
  - docker.io

runcmd:
  - cd /home/yannic
  - wget https://github.com/prometheus/node_exporter/releases/download/v1.5.0/node_exporter-1.5.0.linux-amd64.tar.gz
  - tar xvfz node_exporter-*.*-amd64.tar.gz
  - cd node_exporter-*.*-amd64
  - ./node_exporter &
  - touch test_node_exporter.txt
  - curl http://localhost:9100/metrics > test_node_exporter.txt
  - docker pull prom/prometheus
  - docker pull grafana/grafana
  - wget "https://github.com/quipoly/cloudmodul/blob/main/configs/prometheus.yml" 
  - docker run -d -p 9090:9090 -v /home/yannic/prometheus.yml --name prometheus-yannic prom/prometheus
  - docker run -d -p 3000:3000 --name grafana-container -e "GF_INSTALL_PLUGINS=grafana-clock-panel,grafana-simple-json-datasource" grafana/grafana-enterprise


